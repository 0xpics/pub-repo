<div style="text-align:center; margin-top: 50px; font-family: Arial, sans-serif; color: #333;">
  <h1>Projeto Fullstack AWS</h1>
  
  <button (click)="chamarApi()" style="padding: 15px 30px; font-size: 18px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 8px;">
    Consultar Banco de Dados (Lambda)
  </button>

  <div *ngIf="dados()" style="margin-top: 30px; background: #f4f4f4; padding: 20px; display: inline-block; border-radius: 10px; width: 80%;">
    <h3 style="color: #28a745;">Resposta Recebida:</h3>
    <pre style="text-align: left;">{{ dados() | json }}</pre>
  </div>

  <hr style="margin: 50px 0; border: 1px solid #eee;">

  <div *ngIf="statusInfra() as info; else carregando" style="max-width: 800px; margin: 0 auto; text-align: left; background: #222; color: white; padding: 25px; border-radius: 15px;">
    
    <h2 style="color: #4caf50; border-bottom: 1px solid #444; padding-bottom: 10px;">üõ°Ô∏è Status da Infraestrutura (RDS)</h2>

    <div style="display: flex; gap: 20px; margin-top: 20px;">
      <div style="flex: 1; background: #333; padding: 15px; border-radius: 8px; border-left: 5px solid #4caf50;">
        <small style="color: #aaa;">AUTOMA√á√ÉO (pg_cron)</small><br>
        <strong>Zelador: {{ info.agendamento_manutencao?.active ? 'ATIVO' : 'OFFLINE' }}</strong><br>
        <small>Rotina: {{ info.agendamento_manutencao?.schedule || 'N√£o configurada' }}</small>
      </div>

      <div style="flex: 1; background: #333; padding: 15px; border-radius: 8px; border-left: 5px solid #2196f3;">
        <small style="color: #aaa;">OR√áAMENTO FIXO</small><br>
        <strong>{{ info.custo_infra }}</strong><br>
        <small>Limite: 20GB Storage</small>
      </div>
    </div>

    <h3 style="margin-top: 30px; font-size: 1.1rem;">Mapa de Particionamento (Time-Series)</h3>
    <p style="font-size: 0.8rem; color: #888;">Tabelas f√≠sicas criadas automaticamente para otimizar performance:</p>
    
    <table style="width: 100%; border-collapse: collapse; margin-top: 10px; background: #2a2a2a;">
      <thead>
        <tr style="border-bottom: 2px solid #444; color: #4caf50;">
          <th style="padding: 10px; text-align: left;">Parti√ß√£o</th>
          <th style="padding: 10px; text-align: left;">Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of info.particoes_ativas" style="border-bottom: 1px solid #333;">
          <td style="padding: 10px; font-family: monospace; font-size: 0.9rem;">{{ p?.child_table }}</td>
          <td style="padding: 10px;">
            <span style="color: #4caf50;">‚óè Ativa</span>
          </td>
        </tr>
      </tbody>
    </table>

    <div style="margin-top: 20px; font-size: 0.7rem; color: #666; text-align: center;">
      Vers√£o do Motor: {{ info.motor }}
    </div>
  </div>

  <ng-template #carregando>
    <div style="margin-top: 20px; color: #666; font-style: italic;">
      Sincronizando metadados do RDS...
    </div>
  </ng-template>

</div>